From 0b2b44a1da811c91866c8cff1dc2b4bcb8bb3bb4 Mon Sep 17 00:00:00 2001
From: Martin Herkt <lachs0r@srsfckn.biz>
Date: Mon, 18 Jan 2016 14:06:45 +0100
Subject: [PATCH] add 32-bit defs for schannel/security

---
 mingw-w64-crt/lib32/Makefile.am  |  2 ++
 mingw-w64-crt/lib32/schannel.def | 45 ++++++++++++++++++++++++++++++++++++++++
 mingw-w64-crt/lib32/security.def | 43 ++++++++++++++++++++++++++++++++++++++
 3 files changed, 90 insertions(+)
 create mode 100644 mingw-w64-crt/lib32/schannel.def
 create mode 100644 mingw-w64-crt/lib32/security.def

diff --git a/mingw-w64-crt/lib32/Makefile.am b/mingw-w64-crt/lib32/Makefile.am
index 018c553..33ae022 100644
--- a/mingw-w64-crt/lib32/Makefile.am
+++ b/mingw-w64-crt/lib32/Makefile.am
@@ -229,9 +229,11 @@ lib32_DATA += %reldir%/librstrmgr.a
 lib32_DATA += %reldir%/librtm.a
 lib32_DATA += %reldir%/librtutils.a
 lib32_DATA += %reldir%/libsamcli.a
+lib32_DATA += %reldir%/libschannel.a
 lib32_DATA += %reldir%/libschedcli.a
 lib32_DATA += %reldir%/libscsiport.a
 lib32_DATA += %reldir%/libsecur32.a
+lib32_DATA += %reldir%/libsecurity.a
 lib32_DATA += %reldir%/libsetupapi.a
 #lib32_DATA += %reldir%/libshell32.a    # Handled by custom rule
 lib32_DATA += %reldir%/libshfolder.a
diff --git a/mingw-w64-crt/lib32/schannel.def b/mingw-w64-crt/lib32/schannel.def
new file mode 100644
index 0000000..7fcb45d
--- /dev/null
+++ b/mingw-w64-crt/lib32/schannel.def
@@ -0,0 +1,45 @@
+;
+; Definition file of SCHANNEL.dll
+; Automatic generated by gendef
+; written by Kai Tietz 2008
+;
+LIBRARY "SCHANNEL.dll"
+EXPORTS
+AcceptSecurityContext@36
+AcquireCredentialsHandleA@36
+AcquireCredentialsHandleW@36
+ApplyControlToken@8
+CloseSslPerformanceData
+CollectSslPerformanceData@16
+CompleteAuthToken@8
+DeleteSecurityContext@4
+EnumerateSecurityPackagesA@8
+EnumerateSecurityPackagesW@8
+FreeContextBuffer@4
+FreeCredentialsHandle@4
+ImpersonateSecurityContext@4
+InitSecurityInterfaceA@0
+InitSecurityInterfaceW@0
+InitializeSecurityContextA@48
+InitializeSecurityContextW@48
+MakeSignature@16
+OpenSslPerformanceData@4
+QueryContextAttributesA@12
+QueryContextAttributesW@12
+QuerySecurityPackageInfoA@8
+QuerySecurityPackageInfoW@8
+RevertSecurityContext@4
+SealMessage@16
+SpLsaModeInitialize@16
+SpUserModeInitialize@16
+SslCrackCertificate@16
+SslEmptyCacheA@8
+SslEmptyCacheW@8
+SslFreeCertificate@4
+SslGenerateKeyPair@16
+SslGenerateRandomBits@8
+SslGetMaximumKeySize@4
+SslLoadCertificate@12
+SupportsChannelBinding
+UnsealMessage@16
+VerifySignature@16
diff --git a/mingw-w64-crt/lib32/security.def b/mingw-w64-crt/lib32/security.def
new file mode 100644
index 0000000..5a3fa8c
--- /dev/null
+++ b/mingw-w64-crt/lib32/security.def
@@ -0,0 +1,43 @@
+;
+; Definition file of Security.dll
+; Automatic generated by gendef
+; written by Kai Tietz 2008
+;
+LIBRARY "Security.dll"
+EXPORTS
+AcceptSecurityContext@36
+AcquireCredentialsHandleA@36
+AcquireCredentialsHandleW@36
+AddSecurityPackageA@8
+AddSecurityPackageW@8
+ApplyControlToken@8
+CompleteAuthToken@8
+DecryptMessage@16
+DeleteSecurityContext@4
+DeleteSecurityPackageA@4
+DeleteSecurityPackageW@4
+EncryptMessage@16
+EnumerateSecurityPackagesA@8
+EnumerateSecurityPackagesW@8
+ExportSecurityContext@16
+FreeContextBuffer@4
+FreeCredentialsHandle@4
+ImpersonateSecurityContext@4
+ImportSecurityContextA@16
+ImportSecurityContextW@16
+InitSecurityInterfaceA@0
+InitSecurityInterfaceW@0
+InitializeSecurityContextA@48
+InitializeSecurityContextW@48
+MakeSignature@16
+QueryContextAttributesA@12
+QueryContextAttributesW@12
+QueryCredentialsAttributesA@12
+QueryCredentialsAttributesW@12
+QuerySecurityContextToken@8
+QuerySecurityPackageInfoA@8
+QuerySecurityPackageInfoW@8
+RevertSecurityContext@4
+SealMessage@16
+UnsealMessage@16
+VerifySignature@16
-- 
2.6.4

